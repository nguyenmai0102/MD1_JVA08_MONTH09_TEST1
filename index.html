<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

<meta charset="UTF-8">
<title>Title</title>
<head>

  <script src="model/Students.js"></script>
  <script src="model/users.js"></script>
</head>
<body>



<!--start narba-->
<nav class="navbar navbar-expand-lg navbar-light bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Home</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a id="register" class="nav-link active" aria-current="page" href="/form-login/register.html">Register</a>
        </li>
        <li class="nav-item">
          <a id="login" class="nav-link" href="/form-login/login.html">Login</a>
        </li>
        <li class="nav-item">
          <a id="nameUser" class="nav-link" ></a>
        </li>
        <li class="nav-item">
          <a id="sign out"  onclick="signOut()" class="nav-link active" aria-current="page" >sign out</a>
        </li>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
        </li>
      </ul>
      <form class="d-flex">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </div>
</nav>
<!--end nar ba-->
<h1 style="background-color: #d2cfa9; color: red; text-align: center; ">Thái Sơn Ngũ Hồ Phái</h1>


<h1 style="text-align: center"> </h1> <br>
<label id="validate"></label>

<!-- from create-->
<div class="container" style="text-align: center">
  <div class="row">
    <div class="col-12">
      <div class="input-group mb-3">
        <input id="name" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="basic-addon2">
        <div class="input-group-append">
          <span class="input-group-text">NAME</span>
        </div>
      </div>
      <div class="input-group mb-3">
        <input id="address" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="basic-addon2">
        <div class="input-group-append">
          <span class="input-group-text" >ADDRESS</span>
        </div>
      </div>
      <div class="input-group mb-3">
        <input id="age" type="text" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username" aria-describedby="basic-addon2">
        <div class="input-group-append">
          <span class="input-group-text" >AGE</span>
        </div>
      </div>

      <button class="btn btn-primary" onclick="createStudent()" >create student</button>

      <nav class="navbar navbar-light bg-light justify-content-between">
        <a class="navbar-brand"></a>

          <input id="search" oninput="searchStudent()" class="form-control mr-sm-2" type="search" placeholder="Please fill in the form to Search" aria-label="Search">
          <button onclick="searchStudent()" class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>

      </nav>


      <!--            end create-->
      <!--                table-->
      <table class="table">
        <tr class="table-primary">
          <th>STT</th>
          <th>NAME</th>
          <th>ADDRESS</th>
          <th>AGE</th>
          <th class="td_button">EDIT</th>
          <th class="td_button">DELETE</th>
        </tr>
        <tbody id="drawTable">

        </tbody>
      </table>
      <!--                end table-->

    </div>
  </div>
</div>
<br>




<script>
  let student1= new Students(1, 'Sơn Đại Ca', 'Thái Sơn Ngũ Hồ Phái', 17); ;
  let student2= new Students (2,'Mai Thanh Linh', 'Thái Sơn Bạch Liên phái',15 )
  let student3=new Students(3, 'Mai Thanh Dương', 'Thái Sơn Tiêu Dao phái', 16)
  let student4=new Students(4,'Hoàng Lãng Tử', 'Ngũ Hồ đại phái', 16)
   let student5 = new Students(5, 'Thạch Sầu Đời', 'Thái Sơn Thiên Cốt phái', 16)

  let studentList=[];
  studentList.push(student1, student2, student3,student4, student5)
  console.log('------------------', studentList);


  let nameKey = window.localStorage.getItem('name_key')
  console.log('>>>>>>>>>>>>>>>>>>>', nameKey)



  function showListStudent(){
    let drawTable = ' ';
    let classColor= ' ';
    for (let i = 0; i < studentList.length ; i++) {
      if (i%2==0) {
        classColor = 'table-success'
      }else{
        classColor='table-danger'
      }
      drawTable+= `<tr class="${classColor}">
                        <td>${i+1}</td>
                         <td>${studentList[i].name}</td>
                         <td>${studentList[i].address}</td>
                         <td>${studentList[i].age}</td>
                         <td class="td_button"><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="${studentList[i].id}"><i class="bi bi-wrench-adjustable"></i></button></td>
                         <td class="td_button"><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter" data-whatever="${studentList[i].id}"><i class="bi bi-trash3"></i></button></td>
                        </tr>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Name:</label>
                        <input type="text" class="form-control" id="edit_name">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Address:</label>
                        <input id="edit_address" class="form-control" id="message_address">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Age:</label>
                        <input id="edit_age" class="form-control" id="message_age">
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" onclick="updateStudent()" data-dismiss="modal">Update student</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >do you want delete</h5>
        <button id="deleteStudent" type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button  onclick="deleteStudent()" type="button" class="btn btn-primary" data-dismiss="modal">delete</button>

      </div>
    </div>
  </div>
</div>
`
      let idUpdate;
      let idDelete;
    }
    document.getElementById('drawTable').innerHTML=drawTable;
    $('#exampleModal').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget) // Button that triggered the modal
      var recipient = button.data('whatever') // Extract info from data-* attributes
      idUpdate= recipient;
      // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
      // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
      var modal = $(this)
      modal.find('.modal-title').text('Update Student: ' + recipient)
      modal.find('.modal-body input').val(recipient)
    })
    $('#exampleModalCenter').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget) // Button that triggered the modal
      var recipient = button.data('whatever') // Extract info from data-* attributes
      idDelete= recipient;
      console.log('----------------', idDelete)
      // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
      // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
      var modal = $(this)
      modal.find('.modal-title').text('Update Student: ' + recipient)
      modal.find('.modal-body input').val(recipient)
    })
    console.log('drawTable', drawTable)
    if (nameKey=== null){
      // document.getElementById('edit_id').style.display='none'
      // document.getElementById('delete_id').style.display='none'
    let td_button = document.getElementsByClassName('td_button');
      for (let i = 0; i < td_button.length; i++) {
        td_button[i].style.display = 'none'
      }
    }

  }
  showListStudent()

  function createStudent(){
    let id = studentList[studentList.length-1].getId()+1;
    let name = document.getElementById('name').value;
    let address = document.getElementById('address').value;
    let age = document.getElementById('age').value;
    if (name.trim()=='' && address.trim()== ''  && age.trim()==''){
      document.getElementById('validate').innerHTML=  `<label style="color: red">enter full fill</label>`
      console.log()
    }else{
      let student = new Students (id, name, address, age);

      studentList.push(student);
    }

    showListStudent();
    }


  function updateStudent(){

      let editName = document.getElementById('edit_name').value;
      let editAddress = document.getElementById('edit_address').value;
      let editAge = document.getElementById('edit_age').value;
      for (let i = 0; i < studentList.length ; i++) {
        if (studentList[i].getId()==idUpdate){
          studentList[i].setName(editName);
          studentList[i].setAddress(editAddress);
          studentList[i].setAge(editAge);
        }
      }
      showListStudent()

  }
  function deleteStudent(){
    // lay key trong local storage ra
    // kiem tra.

      for (let i = 0; i < studentList.length ; i++) {
        if (studentList[i].getId()==idDelete){
          studentList.splice(i,1)
        }
      }
      showListStudent();

  }

  let searchStudentList = [];
  function searchStudent() {
searchStudentList=[];
    let search = document.getElementById('search').value;

    if (search.trim() == '') {
     showListStudent()
      return
    } else {
      // for (let i = 0; i < studentList.length; i++) {
      //   if (search.toLowerCase() === studentList[i].name.toLowerCase()) {
      //    searchStudentList.push(studentList[i]);
      //     showListSearch()
      //   }
      // }
      for (let i = 0; i < studentList.length; i++) {
        if (studentList[i].getName().toLowerCase().search(search)!=-1) {
          searchStudentList.push(studentList[i])
        }
      }
      showListSearch()
    }

   }
function showListSearch(){
  let drawTable = ' ';
  let classColor= ' ';
  for (let i = 0; i <searchStudentList.length ; i++) {
    if (i%2==0) {
      classColor = 'table-success'
    }else{
      classColor='table-danger'
    }
    drawTable+= `<tr class="${classColor}">
                        <td>${i+1}</td>
                         <td>${searchStudentList[i].name}</td>
                           <td>${searchStudentList[i].address}</td>
                         <td>${searchStudentList[i].age}</td>
                         <td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="${searchStudentList[i].id}"><i class="bi bi-wrench-adjustable"></i></button></td>
                         <td><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter" data-whatever="${searchStudentList[i].id}">delete</button></td>
                        </tr>
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">New message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                    <div class="form-group">
                        <label for="recipient-name" class="col-form-label">Name:</label>
                        <input type="text" class="form-control" id="edit_name">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Address:</label>
                        <input id="edit_address" class="form-control" id="message_address">
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="col-form-label">Age:</label>
                        <input id="edit_age" class="form-control" id="message_age">
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" onclick="updateStudent()" data-dismiss="modal">Update student</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" >do you want delete</h5>
        <button id="deleteStudent" type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button  onclick="deleteStudent()" type="button" class="btn btn-primary" data-dismiss="modal">delete</button>

      </div>
    </div>
  </div>
</div>
`
    let idUpdate;
    let idDelete;
  }
  document.getElementById('drawTable').innerHTML=drawTable;
  $('#exampleModal').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget) // Button that triggered the modal
    var recipient = button.data('whatever') // Extract info from data-* attributes
    idUpdate= recipient;
    // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
    // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
    var modal = $(this)
    modal.find('.modal-title').text('Update Student: ' + recipient)
    modal.find('.modal-body input').val(recipient)
  })
  $('#exampleModalCenter').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget) // Button that triggered the modal
    var recipient = button.data('whatever') // Extract info from data-* attributes
    idDelete= recipient;
    console.log('----------------', idDelete)
    // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
    // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
    var modal = $(this)
    modal.find('.modal-title').text('Update Student: ' + recipient)
    modal.find('.modal-body input').val(recipient)
  })
}

function  signOut (){
    window.localStorage.removeItem('name_key');
    window.location.reload();
}



</script>


<!-- Footer -->
<footer class="text-center text-lg-start bg" style="background-color: #d2cfa9">
  <!-- Section: Social media -->
  <section class="d-flex justify-content-center justify-content-lg-between p-4 border-bottom">
    <!-- Left -->
    <div class="me-5 d-none d-lg-block">
      <span>Get connected with us on social networks:</span>
    </div>
    <!-- Left -->

    <!-- Right -->
    <div>
      <a href="" class="me-4 text-reset">
        <i class="fab fa-facebook-f"></i>
      </a>
      <a href="" class="me-4 text-reset">
        <i class="fab fa-twitter"></i>
      </a>
      <a href="" class="me-4 text-reset">
        <i class="fab fa-google"></i>
      </a>
      <a href="" class="me-4 text-reset">
        <i class="fab fa-instagram"></i>
      </a>
      <a href="" class="me-4 text-reset">
        <i class="fab fa-linkedin"></i>
      </a>
      <a href="" class="me-4 text-reset">
        <i class="fab fa-github"></i>
      </a>
    </div>
    <!-- Right -->
  </section>
  <!-- Section: Social media -->

  <!-- Section: Links  -->
  <section class="">
    <div class="container text-center text-md-start mt-5">
      <!-- Grid row -->
      <div class="row mt-3">
        <!-- Grid column -->
        <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
          <!-- Content -->
          <h6 class="text-uppercase fw-bold mb-4">
            <i class="fas fa-gem me-3"></i> Thái Sơn Ngũ Hồ
          </h6>
          <p>
            Đến với Thái Sơn Ngũ Hồ, bạn sẽ được đào tạo võ học,
            trở thành cao thủ võ lâm và được học nghề để đảm bảo nghề tay trái.

          </p>
        </div>
        <!-- Grid column -->

        <!-- Grid column -->
        <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
          <!-- Links -->
          <h6 class="text-uppercase fw-bold mb-4">
            sản phẩm kinh doanh
          </h6>
          <p>
            <a href="#!" class="text-reset"> võ đường </a>
          </p>
          <p>
            <a href="#!" class="text-reset">ninja</a>
          </p>
          <p>
            <a href="#!" class="text-reset">đồ thủ công mỹ nghệ</a>
          </p>
          <p>
            <a href="#!" class="text-reset">các ngành nghề khác</a>
          </p>
        </div>
        <!-- Grid column -->

        <!-- Grid column -->
        <div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">
          <!-- Links -->
          <h6 class="text-uppercase fw-bold mb-4">
            Hỗ Trợ
          </h6>
          <p>
            <a href="#!" class="text-reset">fax</a>
          </p>
          <p>
            <a href="#!" class="text-reset">điện thoại</a>
          </p>
          <p>
            <a href="#!" class="text-reset">văn phòng</a>
          </p>
          <p>
            <a href="#!" class="text-reset">bồ câu đưa thư</a>
          </p>
        </div>
        <!-- Grid column -->

        <!-- Grid column -->
        <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
          <!-- Links -->
          <h6 class="text-uppercase fw-bold mb-4">liên hệ</h6>
          <p><i class="fas fa-home me-3"></i> Thái Sơn Ngũ Hồ</p>
          <p>
            <i class="fas fa-envelope me-3"></i>
            thaiSonNguHo@gmail.com
          </p>
          <p><i class="fas fa-phone me-3"></i> + 01 234 567 88</p>
          <p><i class="fas fa-print me-3"></i> + 01 234 567 89</p>
        </div>
        <!-- Grid column -->
      </div>
      <!-- Grid row -->
    </div>
  </section>
  <!-- Section: Links  -->

  <!-- Copyright -->
  <div class="text-center p-4" style="background-color: rgba(0, 0, 0, 0.05);">
    © 2021 Copyright:
    <a class="text-reset fw-bold" href="https://mdbootstrap.com/">MDBootstrap.com</a>
  </div>
  <!-- Copyright -->
</footer>
<!-- Footer -->
<script>
  let nameUser = window.localStorage.getItem('name_key')
          if (nameUser!=null){
            document.getElementById('register').innerHTML= '';
            document.getElementById('login').innerHTML = '';
            document.getElementById('nameUser').innerHTML=nameUser;
          }
</script>
</body>
</html>